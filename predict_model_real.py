# ===========================================
# ğŸ“˜ PIONA ML ì‹¤ë°ì´í„° ì˜ˆì¸¡ (ì™„ì „ë³¸)
# ===========================================
import os
import json
import pandas as pd
from analyzer.inflection_loader import load_inflection_data

# -------------------------------------------
# 1ï¸âƒ£ ê¸°ë³¸ ì„¤ì •
# -------------------------------------------
save_path = r"D:\piona_ml\result_real.json"

# -------------------------------------------
# 2ï¸âƒ£ ì˜ˆì¸¡ ë°ì´í„° (ìƒ˜í”Œ ì‹œë®¬ë ˆì´ì…˜)
# -------------------------------------------
print("ğŸš€ ì‹¤ë°ì´í„° ê¸°ë°˜ ì˜ˆì¸¡ ì‹œì‘...")

data = {
    "symbol": ["000660", "005930", "373220"],
    "price": [580000.0, 97900.0, 463500.0],
    "rise_prob": [14.0, 44.0, 18.0],
}
result = pd.DataFrame(data)

# -------------------------------------------
# 3ï¸âƒ£ ì˜ˆì¸¡ ê²°ê³¼ ì €ì¥
# -------------------------------------------
result.to_json(save_path, force_ascii=False, indent=2)
print(f"ğŸ’¾ ì˜ˆì¸¡ ê²°ê³¼ ì €ì¥: {save_path}")

# ì½˜ì†”ì— ë°”ë¡œ ì¶œë ¥
print(json.dumps(data, indent=2, ensure_ascii=False))
print("ğŸ¯ ì˜ˆì¸¡ ì™„ë£Œ.\n")

# -------------------------------------------
# 4ï¸âƒ£ ì°¸ê³  ë³€ê³¡ í•´ì„¤ (51ë³€ê³¡)
# -------------------------------------------
try:
    inflection = load_inflection_data()
    info_51 = (
        inflection.get("51 ë³€ê³¡")
        or inflection.get("51ë³€ê³¡")
        or inflection.get("51 ë³€ê³¡ì˜ ì¤‘ìš”ì„±")
    )
    if info_51:
        print("ğŸ“˜ ì°¸ê³  ë³€ê³¡ í•´ì„¤ (51ë³€ê³¡):\n")
        print(info_51.strip())
    else:
        print("âš ï¸ 51ë³€ê³¡ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.")
except Exception as e:
    print(f"âš ï¸ ë³€ê³¡ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: {e}")

print("\nâœ… ì „ì²´ ì‘ì—… ì™„ë£Œ.")
